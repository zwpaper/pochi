(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{444:(e,t)=>{"use strict";function r(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,o]of Object.entries(e))if(Array.isArray(o))for(let e of o)t.append(r,n(e));else t.set(r,n(o));return t}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(let t of r){for(let r of t.keys())e.delete(r);for(let[r,n]of t.entries())e.append(r,n)}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return i},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return o}})},2019:(e,t,r)=>{"use strict";r.d(t,{Rc:()=>ez,hx:()=>eW,Ct:()=>eH,iz:()=>eV,i:()=>eB,y:()=>eK,vo:()=>eF,FI:()=>eJ,Xq:()=>e$,Sk:()=>eq,dZ:()=>eZ});var n,o=r(4568),i=r(5579),a=r(7620),l=r(9616),s=r(607),u=r(5388),c=!!("undefined"!=typeof window&&window.document&&window.document.createElement);function d(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}var f=r(9640),h=r(482),p=r(728),m=r(7076),g=r(7509),y=r(9649),b=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,y.TL)(`Primitive.${t}`),n=a.forwardRef((e,n)=>{let{asChild:i,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(i?r:t,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),v=r(3568),S=r(7314),w="dismissableLayer.update",I=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),N=a.forwardRef((e,t)=>{var r,i;let{disableOutsidePointerEvents:l=!1,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:h,onDismiss:p,...m}=e,g=a.useContext(I),[y,N]=a.useState(null),O=null!=(i=null==y?void 0:y.ownerDocument)?i:null==(r=globalThis)?void 0:r.document,[,x]=a.useState({}),D=(0,f.s)(t,e=>N(e)),_=Array.from(g.layers),[P]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(P),R=y?_.indexOf(y):-1,k=g.layersWithOutsidePointerEventsDisabled.size>0,C=R>=A,M=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==(t=globalThis)?void 0:t.document,n=(0,v.c)(e),o=a.useRef(!1),i=a.useRef(()=>{});return a.useEffect(()=>{let e=e=>{if(e.target&&!o.current){let t=function(){T("dismissableLayer.pointerDownOutside",n,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",i.current),i.current=t,r.addEventListener("click",i.current,{once:!0})):t()}else r.removeEventListener("click",i.current);o.current=!1},t=window.setTimeout(()=>{r.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",i.current)}},[r,n]),{onPointerDownCapture:()=>o.current=!0}}(e=>{let t=e.target,r=[...g.branches].some(e=>e.contains(t));C&&!r&&(null==u||u(e),null==h||h(e),e.defaultPrevented||null==p||p())},O),L=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==(t=globalThis)?void 0:t.document,n=(0,v.c)(e),o=a.useRef(!1);return a.useEffect(()=>{let e=e=>{e.target&&!o.current&&T("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return r.addEventListener("focusin",e),()=>r.removeEventListener("focusin",e)},[r,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}(e=>{let t=e.target;![...g.branches].some(e=>e.contains(t))&&(null==c||c(e),null==h||h(e),e.defaultPrevented||null==p||p())},O);return(0,S.U)(e=>{R===g.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&p&&(e.preventDefault(),p()))},O),a.useEffect(()=>{if(y)return l&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(n=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(y)),g.layers.add(y),E(),()=>{l&&1===g.layersWithOutsidePointerEventsDisabled.size&&(O.body.style.pointerEvents=n)}},[y,O,l,g]),a.useEffect(()=>()=>{y&&(g.layers.delete(y),g.layersWithOutsidePointerEventsDisabled.delete(y),E())},[y,g]),a.useEffect(()=>{let e=()=>x({});return document.addEventListener(w,e),()=>document.removeEventListener(w,e)},[]),(0,o.jsx)(b.div,{...m,ref:D,style:{pointerEvents:k?C?"auto":"none":void 0,...e.style},onFocusCapture:d(e.onFocusCapture,L.onFocusCapture),onBlurCapture:d(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:d(e.onPointerDownCapture,M.onPointerDownCapture)})});function E(){let e=new CustomEvent(w);document.dispatchEvent(e)}function T(e,t,r,n){let{discrete:o}=n,i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&i.addEventListener(e,t,{once:!0}),o)i&&g.flushSync(()=>i.dispatchEvent(a));else i.dispatchEvent(a)}N.displayName="DismissableLayer",a.forwardRef((e,t)=>{let r=a.useContext(I),n=a.useRef(null),i=(0,f.s)(t,n);return a.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,o.jsx)(b.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var O=r(8365),x=(r(9136),r(7247)),D=e=>{let{present:t,children:r}=e,n=function(e){var t,r;let[n,o]=a.useState(),i=a.useRef(null),l=a.useRef(e),s=a.useRef("none"),[u,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return a.useEffect(()=>{let e=_(i.current);s.current="mounted"===u?e:"none"},[u]),(0,x.N)(()=>{let t=i.current,r=l.current;if(r!==e){let n=s.current,o=_(t);e?c("MOUNT"):"none"===o||(null==t?void 0:t.display)==="none"?c("UNMOUNT"):r&&n!==o?c("ANIMATION_OUT"):c("UNMOUNT"),l.current=e}},[e,c]),(0,x.N)(()=>{if(n){var e;let t,r=null!=(e=n.ownerDocument.defaultView)?e:window,o=e=>{let o=_(i.current).includes(CSS.escape(e.animationName));if(e.target===n&&o&&(c("ANIMATION_END"),!l.current)){let e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},a=e=>{e.target===n&&(s.current=_(i.current))};return n.addEventListener("animationstart",a),n.addEventListener("animationcancel",o),n.addEventListener("animationend",o),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",a),n.removeEventListener("animationcancel",o),n.removeEventListener("animationend",o)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{i.current=e?getComputedStyle(e):null,o(e)},[])}}(t),o="function"==typeof r?r({present:n.isPresent}):a.Children.only(r),i=(0,f.s)(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?e.ref:(o=(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof r||n.isPresent?a.cloneElement(o,{ref:i}):null};function _(e){return(null==e?void 0:e.animationName)||"none"}D.displayName="Presence";var P=0;function A(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var R=r(1096),k=r(1650),C=r(4907),M=(0,r(5681).f)(),L=function(){},j=a.forwardRef(function(e,t){var r=a.useRef(null),n=a.useState({onScrollCapture:L,onWheelCapture:L,onTouchMoveCapture:L}),o=n[0],i=n[1],l=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noRelative,m=e.noIsolation,g=e.inert,y=e.allowPinchZoom,b=e.as,v=e.gapMode,S=(0,R.Tt)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=(0,C.S)([r,t]),I=(0,R.Cl)((0,R.Cl)({},S),o);return a.createElement(a.Fragment,null,d&&a.createElement(h,{sideCar:M,removeScrollBar:c,shards:f,noRelative:p,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:v}),l?a.cloneElement(a.Children.only(s),(0,R.Cl)((0,R.Cl)({},I),{ref:w})):a.createElement(void 0===b?"div":b,(0,R.Cl)({},I,{className:u,ref:w}),s))});j.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},j.classNames={fullWidth:k.pN,zeroRight:k.Mi};var U=r(2009),z=r(8526),B=r(2343),F=!1;if("undefined"!=typeof window)try{var W=Object.defineProperty({},"passive",{get:function(){return F=!0,!0}});window.addEventListener("test",W,W),window.removeEventListener("test",W,W)}catch(e){F=!1}var V=!!F&&{passive:!1},$=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},H=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),J(e,n)){var o=Y(e,n);if(o[1]>o[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},J=function(e,t){return"v"===e?$(t,"overflowY"):$(t,"overflowX")},Y=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},G=function(e,t,r,n,o){var i,a=(i=window.getComputedStyle(t).direction,"h"===e&&"rtl"===i?-1:1),l=a*n,s=r.target,u=t.contains(s),c=!1,d=l>0,f=0,h=0;do{if(!s)break;var p=Y(e,s),m=p[0],g=p[1]-p[2]-a*m;(m||g)&&J(e,s)&&(f+=g,h+=m);var y=s.parentNode;s=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return d&&(o&&1>Math.abs(f)||!o&&l>f)?c=!0:!d&&(o&&1>Math.abs(h)||!o&&-l>h)&&(c=!0),c},K=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},X=function(e){return[e.deltaX,e.deltaY]},q=function(e){return e&&"current"in e?e.current:e},Z=0,Q=[];let ee=(0,U.m)(M,function(e){var t=a.useRef([]),r=a.useRef([0,0]),n=a.useRef(),o=a.useState(Z++)[0],i=a.useState(B.T0)[0],l=a.useRef(e);a.useEffect(function(){l.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=(0,R.fX)([e.lockRef.current],(e.shards||[]).map(q),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=a.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var o,i=K(e),a=r.current,s="deltaX"in e?e.deltaX:a[0]-i[0],u="deltaY"in e?e.deltaY:a[1]-i[1],c=e.target,d=Math.abs(s)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var f=H(d,c);if(!f)return!0;if(f?o=d:(o="v"===d?"h":"v",f=H(d,c)),!f)return!1;if(!n.current&&"changedTouches"in e&&(s||u)&&(n.current=o),!o)return!0;var h=n.current||o;return G(h,t,e,"h"===h?s:u,!0)},[]),u=a.useCallback(function(e){if(Q.length&&Q[Q.length-1]===i){var r="deltaY"in e?X(e):K(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var o=(l.current.shards||[]).map(q).filter(Boolean).filter(function(t){return t.contains(e.target)});(o.length>0?s(e,o[0]):!l.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=a.useCallback(function(e,r,n,o){var i={name:e,delta:r,target:n,should:o,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(i),setTimeout(function(){t.current=t.current.filter(function(e){return e!==i})},1)},[]),d=a.useCallback(function(e){r.current=K(e),n.current=void 0},[]),f=a.useCallback(function(t){c(t.type,X(t),t.target,s(t,e.lockRef.current))},[]),h=a.useCallback(function(t){c(t.type,K(t),t.target,s(t,e.lockRef.current))},[]);a.useEffect(function(){return Q.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",u,V),document.addEventListener("touchmove",u,V),document.addEventListener("touchstart",d,V),function(){Q=Q.filter(function(e){return e!==i}),document.removeEventListener("wheel",u,V),document.removeEventListener("touchmove",u,V),document.removeEventListener("touchstart",d,V)}},[]);var p=e.removeScrollBar,m=e.inert;return a.createElement(a.Fragment,null,m?a.createElement(i,{styles:"\n  .block-interactivity-".concat(o," {pointer-events: none;}\n  .allow-interactivity-").concat(o," {pointer-events: all;}\n")}):null,p?a.createElement(z.jp,{noRelative:e.noRelative,gapMode:e.gapMode}):null)});var et=a.forwardRef(function(e,t){return a.createElement(j,(0,R.Cl)({},e,{ref:t,sideCar:ee}))});et.classNames=j.classNames;var er=r(3027),en="Dialog",[eo,ei]=(0,h.A)(en),[ea,el]=eo(en),es=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:l,modal:s=!0}=e,u=a.useRef(null),c=a.useRef(null),[d,f]=(0,m.i)({prop:n,defaultProp:null!=i&&i,onChange:l,caller:en});return(0,o.jsx)(ea,{scope:t,triggerRef:u,contentRef:c,contentId:(0,p.B)(),titleId:(0,p.B)(),descriptionId:(0,p.B)(),open:d,onOpenChange:f,onOpenToggle:a.useCallback(()=>f(e=>!e),[f]),modal:s,children:r})};es.displayName=en;var eu="DialogTrigger";a.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=el(eu,r),a=(0,f.s)(t,i.triggerRef);return(0,o.jsx)(b.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":eT(i.open),...n,ref:a,onClick:d(e.onClick,i.onOpenToggle)})}).displayName=eu;var[ec,ed]=eo("DialogPortal",{forceMount:void 0}),ef="DialogOverlay",eh=a.forwardRef((e,t)=>{let r=ed(ef,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=el(ef,e.__scopeDialog);return a.modal?(0,o.jsx)(D,{present:n||a.open,children:(0,o.jsx)(em,{...i,ref:t})}):null});eh.displayName=ef;var ep=(0,y.TL)("DialogOverlay.RemoveScroll"),em=a.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=el(ef,r);return(0,o.jsx)(et,{as:ep,allowPinchZoom:!0,shards:[i.contentRef],children:(0,o.jsx)(b.div,{"data-state":eT(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),eg="DialogContent",ey=a.forwardRef((e,t)=>{let r=ed(eg,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=el(eg,e.__scopeDialog);return(0,o.jsx)(D,{present:n||a.open,children:a.modal?(0,o.jsx)(eb,{...i,ref:t}):(0,o.jsx)(ev,{...i,ref:t})})});ey.displayName=eg;var eb=a.forwardRef((e,t)=>{let r=el(eg,e.__scopeDialog),n=a.useRef(null),i=(0,f.s)(t,r.contentRef,n);return a.useEffect(()=>{let e=n.current;if(e)return(0,er.Eq)(e)},[]),(0,o.jsx)(eS,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:d(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:d(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:d(e.onFocusOutside,e=>e.preventDefault())})}),ev=a.forwardRef((e,t)=>{let r=el(eg,e.__scopeDialog),n=a.useRef(!1),i=a.useRef(!1);return(0,o.jsx)(eS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,a;null==(o=e.onCloseAutoFocus)||o.call(e,t),t.defaultPrevented||(n.current||null==(a=r.triggerRef.current)||a.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{var o,a;null==(o=e.onInteractOutside)||o.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let l=t.target;(null==(a=r.triggerRef.current)?void 0:a.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),eS=a.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:l,...s}=e,u=el(eg,r),c=a.useRef(null),d=(0,f.s)(t,c);return a.useEffect(()=>{var e,t;let r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=r[0])?e:A()),document.body.insertAdjacentElement("beforeend",null!=(t=r[1])?t:A()),P++,()=>{1===P&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),P--}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O.n,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,o.jsx)(N,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":eT(u.open),...s,ref:d,onDismiss:()=>u.onOpenChange(!1)})}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e_,{titleId:u.titleId}),(0,o.jsx)(eP,{contentRef:c,descriptionId:u.descriptionId})]})]})}),ew="DialogTitle",eI=a.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=el(ew,r);return(0,o.jsx)(b.h2,{id:i.titleId,...n,ref:t})});eI.displayName=ew;var eN="DialogDescription";a.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=el(eN,r);return(0,o.jsx)(b.p,{id:i.descriptionId,...n,ref:t})}).displayName=eN;var eE="DialogClose";function eT(e){return e?"open":"closed"}a.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=el(eE,r);return(0,o.jsx)(b.button,{type:"button",...n,ref:t,onClick:d(e.onClick,()=>i.onOpenChange(!1))})}).displayName=eE;var eO="DialogTitleWarning",[ex,eD]=(0,h.q)(eO,{contentName:eg,titleName:ew,docsSlug:"dialog"}),e_=e=>{let{titleId:t}=e,r=eD(eO),n="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return a.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},eP=e=>{let{contentRef:t,descriptionId:r}=e,n=eD("DialogDescriptionWarning"),o="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return a.useEffect(()=>{var e;let n=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");r&&n&&(document.getElementById(r)||console.warn(o))},[o,t,r]),null},eA=r(6671),eR=r(7430),ek=r(2945),eC=r(3206),eM=r(8097);let eL=(0,a.createContext)(null),ej=(0,a.createContext)(null),eU=(0,a.createContext)(null);function ez(e){let{open:t,onOpenChange:r,search:n,onSearchChange:i,isLoading:l=!1,children:s}=e,[u,c]=(0,a.useState)(null);return(0,o.jsx)(es,{open:t,onOpenChange:r,children:(0,o.jsx)(eL.Provider,{value:(0,a.useMemo)(()=>({open:t,onOpenChange:r,search:n,onSearchChange:i,active:u,setActive:c,isLoading:l}),[u,l,r,i,t,n]),children:s})})}function eB(e){return(0,o.jsx)("div",{...e,className:(0,s.QP)("flex flex-row items-center gap-2 p-3 pb-2",e.className)})}function eF(e){let{text:t}=(0,l.useI18n)(),{search:r,onSearchChange:n}=eQ();return(0,o.jsx)("input",{...e,value:r,onChange:e=>n(e.target.value),placeholder:t.search,className:"w-0 flex-1 bg-transparent text-lg placeholder:text-fd-muted-foreground focus-visible:outline-none"})}function eW(e){let{children:t="ESC",className:r,...n}=e,{onOpenChange:i}=eQ();return(0,o.jsx)("button",{type:"button",onClick:()=>i(!1),className:(0,s.QP)((0,u.r)({color:"outline",size:"sm",className:"font-mono text-fd-muted-foreground"}),r),...n,children:t})}function eV(e){return(0,o.jsx)("div",{...e,className:(0,s.QP)("bg-fd-secondary/50 p-3 empty:hidden",e.className)})}function e$(e){return(0,o.jsx)(eh,{...e,className:(0,s.QP)("fixed inset-0 z-50 max-md:backdrop-blur-xs data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",e.className)})}function eH(e){let{children:t,...r}=e,{text:n}=(0,l.useI18n)();return(0,o.jsxs)(ey,{"aria-describedby":void 0,...r,className:(0,s.QP)("fixed divide-y divide-fd-border left-1/2 top-4 md:top-[calc(50%-250px)] z-50 w-[calc(100%-2*var(--spacing))] max-w-screen-sm -translate-x-1/2 rounded-2xl border bg-fd-popover/60 backdrop-blur-xl text-fd-popover-foreground shadow-2xl shadow-black/40 overflow-hidden data-[state=closed]:animate-fd-dialog-out data-[state=open]:animate-fd-dialog-in",r.className),children:[(0,o.jsx)(eI,{className:"hidden",children:n.search}),t]})}function eJ(e){let{items:t=null,Empty:r=()=>(0,o.jsx)("div",{className:"py-12 text-center text-sm text-fd-muted-foreground",children:(0,o.jsx)(l.I18nLabel,{label:"searchNoResult"})}),Item:n=e=>(0,o.jsx)(eG,{...e}),...i}=e,u=(0,a.useRef)(null),[c,d]=(0,a.useState)(()=>t&&t.length>0?t[0].id:null),{onOpenChange:f}=eQ(),h=(0,ek.rd)(),p=e=>{var t;let{external:r,url:n}=e;r?null==(t=window.open(n,"_blank"))||t.focus():h.push(n),f(!1)},m=(0,eR.J)(e=>{if(t){if("ArrowDown"===e.key||"ArrowUp"==e.key){var r,n;let o=t.findIndex(e=>e.id===c);-1===o?o=0:"ArrowDown"===e.key?o++:o--,d(null!=(n=null==(r=t.at(o%t.length))?void 0:r.id)?n:null),e.preventDefault()}if("Enter"===e.key){let r=t.find(e=>e.id===c);r&&p(r),e.preventDefault()}}});return(0,a.useEffect)(()=>{let e=u.current;if(!e)return;let t=new ResizeObserver(()=>{let t=e.firstElementChild;e.style.setProperty("--fd-animated-height","".concat(t.clientHeight,"px"))}),r=e.firstElementChild;return r&&t.observe(r),window.addEventListener("keydown",m),()=>{t.disconnect(),window.removeEventListener("keydown",m)}},[m]),(0,eC.T)(t,()=>{t&&t.length>0&&d(t[0].id)}),(0,o.jsx)("div",{...i,ref:u,className:(0,s.QP)("overflow-hidden h-(--fd-animated-height) transition-[height]",!t&&"border-b-0",i.className),children:(0,o.jsx)("div",{className:(0,s.QP)("w-full flex flex-col overflow-y-auto max-h-[460px] p-1",!t&&"hidden"),children:(0,o.jsxs)(ej.Provider,{value:(0,a.useMemo)(()=>({active:c,setActive:d}),[c]),children:[(null==t?void 0:t.length)===0&&r(),null==t?void 0:t.map(e=>(0,o.jsx)(a.Fragment,{children:n({item:e,onClick:()=>p(e)})},e.id))]})})})}let eY={text:null,heading:(0,o.jsx)(i.Vw,{className:"size-4 shrink-0 text-fd-muted-foreground"}),page:(0,o.jsx)(i.iU,{className:"size-6 text-fd-muted-foreground bg-fd-muted border p-0.5 rounded-sm shadow-sm shrink-0"})};function eG(e){let{item:t,className:r,children:n,...i}=e,{active:l,setActive:u}=function(){let e=(0,a.useContext)(ej);if(!e)throw Error("Missing <SearchDialogList />");return e}(),c=t.id===l;return(0,o.jsx)("button",{type:"button",ref:(0,a.useCallback)(e=>{c&&e&&(0,eM.A)(e,{scrollMode:"if-needed",block:"nearest",boundary:e.parentElement})},[c]),"aria-selected":c,className:(0,s.QP)("relative flex select-none flex-row items-center gap-2 p-2 text-start text-sm rounded-lg","page"!==t.type&&"ps-8","page"===t.type||"heading"===t.type?"font-medium":"text-fd-popover-foreground/80",c&&"bg-fd-accent text-fd-accent-foreground",r),onPointerMove:()=>u(t.id),...i,children:null!=n?n:(0,o.jsxs)(o.Fragment,{children:["page"!==t.type&&(0,o.jsx)("div",{role:"none",className:"absolute start-4.5 inset-y-0 w-px bg-fd-border"}),eY[t.type],(0,o.jsx)("p",{className:"min-w-0 truncate",children:t.content})]})})}function eK(e){let{isLoading:t}=eQ();return(0,o.jsx)(i.vj,{...e,className:(0,s.QP)("size-5 text-fd-muted-foreground",t&&"animate-pulse duration-400",e.className)})}let eX=(0,eA.F)("rounded-md border px-2 py-0.5 text-xs font-medium text-fd-muted-foreground transition-colors",{variants:{active:{true:"bg-fd-accent text-fd-accent-foreground"}}});function eq(e){let{tag:t,onTagChange:r,allowClear:n=!1,...i}=e;return(0,o.jsx)("div",{...i,className:(0,s.QP)("flex items-center gap-1 flex-wrap",i.className),children:(0,o.jsx)(eU.Provider,{value:(0,a.useMemo)(()=>({value:t,onValueChange:r,allowClear:n}),[n,r,t]),children:i.children})})}function eZ(e){let{value:t,className:r,...n}=e,{onValueChange:i,value:l,allowClear:u}=function(){let e=(0,a.useContext)(eU);if(!e)throw Error("Missing <TagsList />");return e}(),c=t===l;return(0,o.jsx)("button",{type:"button","data-active":c,className:(0,s.QP)(eX({active:c,className:r})),onClick:()=>{i(c&&u?void 0:t)},tabIndex:-1,...n,children:n.children})}function eQ(){let e=(0,a.useContext)(eL);if(!e)throw Error("Missing <SearchDialog />");return e}},4157:(e,t,r)=>{"use strict";r.d(t,{RootProvider:()=>S});var n=r(4568),o=r(8309),i=r(7620),a=r(7644),l=r(9588),s=r(7448),u=r(7430),c=r(9616),d=r(2945);let f=(0,i.lazy)(()=>r.e(913).then(r.bind(r,2913)));function h(e){let{children:t,dir:r="ltr",theme:i={},search:u,i18n:c}=e,d=t;return(null==u?void 0:u.enabled)!==!1&&(d=(0,n.jsx)(s.YL,{SearchDialog:f,...u,children:d})),(null==i?void 0:i.enabled)!==!1&&(d=(0,n.jsx)(o.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,...i,children:d})),c&&(d=(0,n.jsx)(p,{...c,children:d})),(0,n.jsx)(a.FX,{dir:r,children:(0,n.jsx)(l.G,{children:d})})}function p(e){let{locales:t=[],locale:r,onLocaleChange:o,...a}=e,l=(0,d.rd)(),s=(0,d.a8)(),f=(0,u.J)(e=>{if(o)return o(e);let t=s.split("/").filter(e=>e.length>0);t[0]!==r?t.unshift(e):t[0]=e,l.push("/".concat(t.join("/"))),l.refresh()});return(0,n.jsx)(c.I18nContext.Provider,{value:(0,i.useMemo)(()=>({locale:r,locales:t,text:{...c.defaultTranslations,...a.translations},onChange:f}),[r,t,f,a.translations]),children:a.children})}var m=r(1042),g=r(2418),y=r(7261),b=r(1773);function v(e){let{children:t}=e;return(0,n.jsx)(m.Uy,{usePathname:g.usePathname,useRouter:g.useRouter,useParams:g.useParams,Link:y,Image:b.default,children:t})}function S(e){return(0,n.jsx)(v,{children:(0,n.jsx)(h,{...e,children:e.children})})}r(8516),r(4598)},4637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return i}});let n=r(8490),o=r(1075);function i(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,o.hasBasePath)(r.pathname)}catch(e){return!1}}},4695:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var n=r(367),o=r(7620);function i(e,t,a,l=100,s=!1,u){let{delayMs:c=l??100,allowEmpty:d=s??!1,...f}=e;f.tag??=a,f.locale??=t;let[h,p]=(0,o.useState)(""),[m,g]=(0,o.useState)("empty"),[y,b]=(0,o.useState)(),[v,S]=(0,o.useState)(!1),w=function(e,t=1e3){let[r,n]=(0,o.useState)(e),i=(0,o.useRef)(void 0);if(0===t)return e;if(e!==r&&i.current?.value!==e){i.current&&clearTimeout(i.current.handler);let r=window.setTimeout(()=>{n(e)},t);i.current={value:e,handler:r}}return r}(h,c),I=(0,o.useRef)(void 0);return(0,n.T)([f,w],()=>{I.current&&(I.current(),I.current=void 0),S(!0);let e=!1;I.current=()=>{e=!0},(async function(){if(0===w.length&&!d)return"empty";if("fetch"===f.type){let{fetchDocs:e}=await r.e(444).then(r.bind(r,3444));return e(w,f)}if("algolia"===f.type){let{searchDocs:e}=await r.e(733).then(r.bind(r,5733));return e(w,f)}if("orama-cloud"===f.type){let{searchDocs:e}=await r.e(242).then(r.bind(r,2242));return e(w,f)}if("static"===f.type){let{search:e}=await r.e(12).then(r.bind(r,2012));return e(w,f)}throw Error("unknown search client")})().then(t=>{e||(b(void 0),g(t))}).catch(e=>{b(e)}).finally(()=>{S(!1)})},function e(t,r){if(Array.isArray(t)&&Array.isArray(r))return r.length!==t.length||t.some((t,n)=>e(t,r[n]));if("object"==typeof t&&t&&"object"==typeof r&&r){let n=Object.keys(t),o=Object.keys(r);return n.length!==o.length||n.some(n=>e(t[n],r[n]))}return t!==r}),{search:h,setSearch:p,query:{isLoading:v,data:m,error:y}}}},5908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return i},formatWithValidation:function(){return l},urlObjectKeys:function(){return a}});let n=r(5999)._(r(444)),o=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,i=e.protocol||"",a=e.pathname||"",l=e.hash||"",s=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(u+=":"+e.port)),s&&"object"==typeof s&&(s=String(n.urlQueryToSearchParams(s)));let c=e.search||s&&"?"+s||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||o.test(i))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),l&&"#"!==l[0]&&(l="#"+l),c&&"?"!==c[0]&&(c="?"+c),""+i+u+(a=a.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+l}let a=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(e){return i(e)}},6355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},6572:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},7261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return g},useLinkStatus:function(){return b}});let n=r(5999),o=r(4568),i=n._(r(7620)),a=r(5908),l=r(9330),s=r(7533),u=r(7849),c=r(8490),d=r(7720);r(1611);let f=r(3781),h=r(4637),p=r(529);function m(e){return"string"==typeof e?e:(0,a.formatUrl)(e)}function g(e){let t,r,n,[a,g]=(0,i.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,i.useRef)(null),{href:v,as:S,children:w,prefetch:I=null,passHref:N,replace:E,shallow:T,scroll:O,onClick:x,onMouseEnter:D,onTouchStart:_,legacyBehavior:P=!1,onNavigate:A,ref:R,unstable_dynamicOnHover:k,...C}=e;t=w,P&&("string"==typeof t||"number"==typeof t)&&(t=(0,o.jsx)("a",{children:t}));let M=i.default.useContext(l.AppRouterContext),L=!1!==I,j=null===I?s.PrefetchKind.AUTO:s.PrefetchKind.FULL,{href:U,as:z}=i.default.useMemo(()=>{let e=m(v);return{href:e,as:S?m(S):e}},[v,S]);P&&(r=i.default.Children.only(t));let B=P?r&&"object"==typeof r&&r.ref:R,F=i.default.useCallback(e=>(null!==M&&(b.current=(0,f.mountLinkInstance)(e,U,M,j,L,g)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[L,U,M,j,g]),W={ref:(0,u.useMergedRef)(F,B),onClick(e){P||"function"!=typeof x||x(e),P&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),M&&(e.defaultPrevented||function(e,t,r,n,o,a,l){let{nodeName:s}=e.currentTarget;if(!("A"===s.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,h.isLocalURL)(t)){o&&(e.preventDefault(),location.replace(t));return}e.preventDefault(),i.default.startTransition(()=>{if(l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}(0,p.dispatchNavigateAction)(r||t,o?"replace":"push",null==a||a,n.current)})}}(e,U,z,b,E,O,A))},onMouseEnter(e){P||"function"!=typeof D||D(e),P&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),M&&L&&(0,f.onNavigationIntent)(e.currentTarget,!0===k)},onTouchStart:function(e){P||"function"!=typeof _||_(e),P&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),M&&L&&(0,f.onNavigationIntent)(e.currentTarget,!0===k)}};return(0,c.isAbsoluteUrl)(z)?W.href=z:P&&!N&&("a"!==r.type||"href"in r.props)||(W.href=(0,d.addBasePath)(z)),n=P?i.default.cloneElement(r,W):(0,o.jsx)("a",{...C,...W,children:t}),(0,o.jsx)(y.Provider,{value:a,children:n})}r(6355);let y=(0,i.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,i.useContext)(y);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7430:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var n=r(7620);function o(e){let t=(0,n.useRef)(e);return t.current=e,(0,n.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current(...r)},[])}},7938:(e,t,r)=>{"use strict";r.d(t,{vt:()=>e0,VT:()=>e1,Hh:()=>tp,$P:()=>tf});let n={arabic:"ar",armenian:"am",bulgarian:"bg",czech:"cz",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},o={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim,czech:/[^A-Z0-9a-zěščřžýáíéúůóťďĚŠČŘŽÝÁÍÉÓÚŮŤĎ-]+/gim},i=Object.keys(n);var a=r(459);let l=Date.now().toString().slice(5),s=0,u=BigInt(1e3),c=BigInt(1e6),d=BigInt(1e9);function f(e,t){if(t.length<65535)Array.prototype.push.apply(e,t);else{let r=t.length;for(let n=0;n<r;n+=65535)Array.prototype.push.apply(e,t.slice(n,n+65535))}}function h(){return BigInt(Math.floor(1e6*performance.now()))}function p(e){return("number"==typeof e&&(e=BigInt(e)),e<u)?`${e}ns`:e<c?`${e/u}μs`:e<d?`${e/c}ms`:`${e/d}s`}function m(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?h():void 0!==a&&a.release&&"node"===a.release.name||void 0!==a&&"function"==typeof a?.hrtime?.bigint?a.hrtime.bigint():"undefined"!=typeof performance?h():BigInt(0)}function g(){return`${l}-${s++}`}function y(e,t){return void 0===Object.hasOwn?Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0:Object.hasOwn(e,t)?e[t]:void 0}function b(e,t){return t[1]===e[1]?e[0]-t[0]:t[1]-e[1]}function v(e,t){let r={},n=t.length;for(let o=0;o<n;o++){let n=t[o],i=n.split("."),a=e,l=i.length;for(let e=0;e<l;e++)if("object"==typeof(a=a[i[e]])){if(null!==a&&"lat"in a&&"lon"in a&&"number"==typeof a.lat&&"number"==typeof a.lon){a=r[n]=a;break}else if(!Array.isArray(a)&&null!==a&&e===l-1){a=void 0;break}}else if((null===a||"object"!=typeof a)&&e<l-1){a=void 0;break}void 0!==a&&(r[n]=a)}return r}function S(e,t){return v(e,[t])[t]}let w={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function I(e,t){e.hits=e.hits.map(e=>({...e,document:{...e.document,...t.reduce((e,t)=>{let r=t.split("."),n=r.pop(),o=e;for(let e of r)o[e]=o[e]??{},o=o[e];return o[n]=null,e},e.document)}}))}function N(e){return Array.isArray(e)?e.some(e=>N(e)):e?.constructor?.name==="AsyncFunction"}let E="intersection"in new Set;function T(...e){if(0===e.length)return new Set;if(1===e.length)return e[0];if(2===e.length){let t=e[0],r=e[1];if(E)return t.intersection(r);let n=new Set,o=t.size<r.size?t:r,i=o===t?r:t;for(let e of o)i.has(e)&&n.add(e);return n}let t={index:0,size:e[0].size};for(let r=1;r<e.length;r++)e[r].size<t.size&&(t.index=r,t.size=e[r].size);if(E){let r=e[t.index];for(let n=0;n<e.length;n++)n!==t.index&&(r=r.intersection(e[n]));return r}let r=e[t.index];for(let n=0;n<e.length;n++){if(n===t.index)continue;let o=e[n];for(let e of r)o.has(e)||r.delete(e)}return r}let O="union"in new Set;function x(e,t){return O?e?e.union(t):t:new Set(e?[...e,...t]:t)}let D=i.join("\n - "),_={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${D}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.orama.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:'Facet doens\'t support the type "%s".',INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.",PLUGIN_COMPONENT_CONFLICT:'The component "%s" is already defined. The plugin "%s" is trying to redefine it.'};function P(e,...t){let r=Error(function(e,...t){return e.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...e){let{width:r,type:n,position:o}=e[e.length-1],i=o?t[Number.parseInt(o)-1]:t.shift(),a=""===r?0:Number.parseInt(r);switch(n){case"d":return i.toString().padStart(a,"0");case"f":{let e=i,[t,n]=r.split(".").map(e=>Number.parseFloat(e));return"number"==typeof n&&n>=0&&(e=e.toFixed(n)),"number"==typeof t&&t>=0?e.toString().padStart(a,"0"):e.toString()}case"s":return a<0?i.toString().padEnd(-a," "):i.toString().padStart(a," ");default:return i}})}(_[e]??`Unsupported Orama Error code: ${e}`,...t));return r.code=e,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(r),r}function A(e){return{raw:Number(e),formatted:p(e)}}function R(e){if(e.id){if("string"!=typeof e.id)throw P("DOCUMENT_ID_MUST_BE_STRING",typeof e.id);return e.id}return g()}let k={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},C={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function M(e){return"string"==typeof e&&/^vector\[\d+\]$/.test(e)}function L(e){return"string"==typeof e&&k[e]}function j(e){let t=Number(e.slice(7,-1));switch(!0){case isNaN(t):throw P("INVALID_VECTOR_VALUE",e);case t<=0:throw P("INVALID_VECTOR_SIZE",e);default:return t}}function U(e){return{internalIdToId:e.internalIdToId}}function z(e,t){let{internalIdToId:r}=t;e.internalDocumentIDStore.idToInternalId.clear(),e.internalDocumentIDStore.internalIdToId=[];let n=r.length;for(let t=0;t<n;t++){let n=r[t];e.internalDocumentIDStore.idToInternalId.set(n,t+1),e.internalDocumentIDStore.internalIdToId.push(n)}}function B(e,t){if("string"==typeof t){let r=e.idToInternalId.get(t);if(r)return r;let n=e.idToInternalId.size+1;return e.idToInternalId.set(t,n),e.internalIdToId.push(t),n}return t>e.internalIdToId.length?B(e,t.toString()):t}function F(e,t){if(e.internalIdToId.length<t)throw Error(`Invalid internalId ${t}`);return e.internalIdToId[t-1]}function W(e,t){return{sharedInternalDocumentStore:t,docs:{},count:0}}function V(e,t){let r=B(e.sharedInternalDocumentStore,t);return e.docs[r]}function $(e,t){let r=t.length,n=Array.from({length:r});for(let o=0;o<r;o++){let r=B(e.sharedInternalDocumentStore,t[o]);n[o]=e.docs[r]}return n}function H(e){return e.docs}function J(e,t,r,n){return void 0===e.docs[r]&&(e.docs[r]=n,e.count++,!0)}function Y(e,t){let r=B(e.sharedInternalDocumentStore,t);return void 0!==e.docs[r]&&(delete e.docs[r],e.count--,!0)}function G(e){return e.count}function K(e,t){return{docs:t.docs,count:t.count,sharedInternalDocumentStore:e}}function X(e){return{docs:e.docs,count:e.count}}let q=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeUpsert","afterUpsert","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeUpsertMultiple","afterUpsertMultiple","beforeLoad","afterLoad","afterCreate"],Z=["tokenizer","index","documentsStore","sorter"],Q=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];function ee(e,t,r,n,o){if(e.some(N))return(async()=>{for(let i of e)await i(t,r,n,o)})();for(let i of e)i(t,r,n,o)}function et(e,t,r,n){if(e.some(N))return(async()=>{for(let o of e)await o(t,r,n)})();for(let o of e)o(t,r,n)}class er{k;v;l=null;r=null;h=1;constructor(e,t){this.k=e,this.v=new Set(t)}updateHeight(){this.h=Math.max(er.getHeight(this.l),er.getHeight(this.r))+1}static getHeight(e){return e?e.h:0}getBalanceFactor(){return er.getHeight(this.l)-er.getHeight(this.r)}rotateLeft(){let e=this.r;return this.r=e.l,e.l=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.l;return this.l=e.r,e.r=this,this.updateHeight(),e.updateHeight(),e}toJSON(){return{k:this.k,v:Array.from(this.v),l:this.l?this.l.toJSON():null,r:this.r?this.r.toJSON():null,h:this.h}}static fromJSON(e){let t=new er(e.k,e.v);return t.l=e.l?er.fromJSON(e.l):null,t.r=e.r?er.fromJSON(e.r):null,t.h=e.h,t}}class en{root=null;insertCount=0;constructor(e,t){void 0!==e&&void 0!==t&&(this.root=new er(e,t))}insert(e,t,r=1e3){this.root=this.insertNode(this.root,e,t,r)}insertMultiple(e,t,r=1e3){for(let n of t)this.insert(e,n,r)}rebalance(){this.root&&(this.root=this.rebalanceNode(this.root))}toJSON(){return{root:this.root?this.root.toJSON():null,insertCount:this.insertCount}}static fromJSON(e){let t=new en;return t.root=e.root?er.fromJSON(e.root):null,t.insertCount=e.insertCount||0,t}insertNode(e,t,r,n){if(null===e)return new er(t,[r]);let o=[],i=e,a=null;for(;null!==i;)if(o.push({parent:a,node:i}),t<i.k)if(null===i.l){i.l=new er(t,[r]),o.push({parent:i,node:i.l});break}else a=i,i=i.l;else if(!(t>i.k))return i.v.add(r),e;else if(null===i.r){i.r=new er(t,[r]),o.push({parent:i,node:i.r});break}else a=i,i=i.r;let l=!1;this.insertCount++%n==0&&(l=!0);for(let t=o.length-1;t>=0;t--){let{parent:r,node:n}=o[t];if(n.updateHeight(),l){let t=this.rebalanceNode(n);r?r.l===n?r.l=t:r.r===n&&(r.r=t):e=t}}return e}rebalanceNode(e){let t=e.getBalanceFactor();if(t>1){if(e.l&&e.l.getBalanceFactor()>=0)return e.rotateRight();else if(e.l)return e.l=e.l.rotateLeft(),e.rotateRight()}if(t<-1){if(e.r&&0>=e.r.getBalanceFactor())return e.rotateLeft();else if(e.r)return e.r=e.r.rotateRight(),e.rotateLeft()}return e}find(e){let t=this.findNodeByKey(e);return t?t.v:null}contains(e){return null!==this.find(e)}getSize(){let e=0,t=[],r=this.root;for(;r||t.length>0;){for(;r;)t.push(r),r=r.l;r=t.pop(),e++,r=r.r}return e}isBalanced(){if(!this.root)return!0;let e=[this.root];for(;e.length>0;){let t=e.pop();if(Math.abs(t.getBalanceFactor())>1)return!1;t.l&&e.push(t.l),t.r&&e.push(t.r)}return!0}remove(e){this.root=this.removeNode(this.root,e)}removeDocument(e,t){let r=this.findNodeByKey(e);r&&(1===r.v.size?this.root=this.removeNode(this.root,e):r.v=new Set([...r.v.values()].filter(e=>e!==t)))}findNodeByKey(e){let t=this.root;for(;t;)if(e<t.k)t=t.l;else{if(!(e>t.k))return t;t=t.r}return null}removeNode(e,t){if(null===e)return null;let r=[],n=e;for(;null!==n&&n.k!==t;)r.push(n),n=t<n.k?n.l:n.r;if(null===n)return e;if(null===n.l||null===n.r){let t=n.l?n.l:n.r;if(0===r.length)e=t;else{let e=r[r.length-1];e.l===n?e.l=t:e.r=t}}else{let e=n,t=n.r;for(;null!==t.l;)e=t,t=t.l;n.k=t.k,n.v=t.v,e.l===t?e.l=t.r:e.r=t.r,n=e}r.push(n);for(let t=r.length-1;t>=0;t--){let n=r[t];n.updateHeight();let o=this.rebalanceNode(n);if(t>0){let e=r[t-1];e.l===n?e.l=o:e.r===n&&(e.r=o)}else e=o}return e}rangeSearch(e,t){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if((o=n.pop()).k>=e&&o.k<=t&&(r=x(r,o.v)),o.k>t)break;o=o.r}return r}greaterThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.r;if(o=n.pop(),t&&o.k>=e||!t&&o.k>e)r=x(r,o.v);else if(o.k<=e)break;o=o.l}return r}lessThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if(o=n.pop(),t&&o.k<=e||!t&&o.k<e)r=x(r,o.v);else if(o.k>e)break;o=o.r}return r}}class eo{numberToDocumentId;constructor(){this.numberToDocumentId=new Map}insert(e,t){this.numberToDocumentId.has(e)?this.numberToDocumentId.get(e).add(t):this.numberToDocumentId.set(e,new Set([t]))}find(e){let t=this.numberToDocumentId.get(e);return t?Array.from(t):null}remove(e){this.numberToDocumentId.delete(e)}removeDocument(e,t){let r=this.numberToDocumentId.get(t);r&&(r.delete(e),0===r.size&&this.numberToDocumentId.delete(t))}contains(e){return this.numberToDocumentId.has(e)}getSize(){let e=0;for(let t of this.numberToDocumentId.values())e+=t.size;return e}filter(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"eq":{let t=e[r],n=this.numberToDocumentId.get(t);return n?Array.from(n):[]}case"in":{let t=e[r],n=new Set;for(let e of t){let t=this.numberToDocumentId.get(e);if(t)for(let e of t)n.add(e)}return Array.from(n)}case"nin":{let t=new Set(e[r]),n=new Set;for(let[e,r]of this.numberToDocumentId.entries())if(!t.has(e))for(let e of r)n.add(e);return Array.from(n)}default:throw Error("Invalid operation")}}filterArr(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"containsAll":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e].filter(e=>t.has(e)))))}case"containsAny":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e,...t])))}default:throw Error("Invalid operation")}}static fromJSON(e){if(!e.numberToDocumentId)throw Error("Invalid Flat Tree JSON");let t=new eo;for(let[r,n]of e.numberToDocumentId)t.numberToDocumentId.set(r,new Set(n));return t}toJSON(){return{numberToDocumentId:Array.from(this.numberToDocumentId.entries()).map(([e,t])=>[e,Array.from(t)])}}}function ei(e,t,r){let n=function(e,t,r){if(r<0)return -1;if(e===t)return 0;let n=e.length,o=t.length;if(0===n)return o<=r?o:-1;if(0===o)return n<=r?n:-1;let i=Math.abs(n-o);if(e.startsWith(t))return i<=r?i:-1;if(t.startsWith(e))return 0;if(i>r)return -1;let a=[];for(let e=0;e<=n;e++){a[e]=[e];for(let t=1;t<=o;t++)a[e][t]=0===e?t:0}for(let i=1;i<=n;i++){let n=1/0;for(let r=1;r<=o;r++)e[i-1]===t[r-1]?a[i][r]=a[i-1][r-1]:a[i][r]=Math.min(a[i-1][r]+1,a[i][r-1]+1,a[i-1][r-1]+1),n=Math.min(n,a[i][r]);if(n>r)return -1}return a[n][o]<=r?a[n][o]:-1}(e,t,r);return{distance:n,isBounded:n>=0}}class ea{k;s;c=new Map;d=new Set;e;w="";constructor(e,t,r){this.k=e,this.s=t,this.e=r}updateParent(e){this.w=e.w+this.s}addDocument(e){this.d.add(e)}removeDocument(e){return this.d.delete(e)}findAllWords(e,t,r,n){let o=[this];for(;o.length>0;){let i=o.pop();if(i.e){let{w:o,d:a}=i;if(r&&o!==t)continue;if(null!==y(e,o))if(n){if(!(Math.abs(t.length-o.length)<=n)||!ei(t,o,n).isBounded)continue;e[o]=[]}else e[o]=[];if(null!=y(e,o)&&a.size>0){let t=e[o];for(let e of a)t.includes(e)||t.push(e)}}i.c.size>0&&o.push(...i.c.values())}return e}insert(e,t){let r=this,n=0,o=e.length;for(;n<o;){let i=e[n],a=r.c.get(i);if(a){let i=a.s,l=i.length,s=0;for(;s<l&&n+s<o&&i[s]===e[n+s];)s++;if(s===l){if(r=a,(n+=s)===o){a.e||(a.e=!0),a.addDocument(t);return}continue}let u=i.slice(0,s),c=i.slice(s),d=e.slice(n+s),f=new ea(u[0],u,!1);if(r.c.set(u[0],f),f.updateParent(r),a.s=c,a.k=c[0],f.c.set(c[0],a),a.updateParent(f),d){let e=new ea(d[0],d,!0);e.addDocument(t),f.c.set(d[0],e),e.updateParent(f)}else f.e=!0,f.addDocument(t);return}{let o=new ea(i,e.slice(n),!0);o.addDocument(t),r.c.set(i,o),o.updateParent(r);return}}r.e||(r.e=!0),r.addDocument(t)}_findLevenshtein(e,t,r,n,o){let i=[{node:this,index:t,tolerance:r}];for(;i.length>0;){let{node:t,index:r,tolerance:a}=i.pop();if(t.w.startsWith(e)){t.findAllWords(o,e,!1,0);continue}if(a<0)continue;if(t.e){let{w:r,d:i}=t;if(r&&(ei(e,r,n).isBounded&&(o[r]=[]),void 0!==y(o,r)&&i.size>0)){let e=new Set(o[r]);for(let t of i)e.add(t);o[r]=Array.from(e)}}if(r>=e.length)continue;let l=e[r];if(t.c.has(l)){let e=t.c.get(l);i.push({node:e,index:r+1,tolerance:a})}for(let[e,n]of(i.push({node:t,index:r+1,tolerance:a-1}),t.c))i.push({node:n,index:r,tolerance:a-1}),e!==l&&i.push({node:n,index:r+1,tolerance:a-1})}}find(e){let{term:t,exact:r,tolerance:n}=e;if(n&&!r){let e={};return this._findLevenshtein(t,0,n,n,e),e}{let e=this,o=0,i=t.length;for(;o<i;){let a=t[o],l=e.c.get(a);if(!l)return{};{let a=l.s,s=a.length,u=0;for(;u<s&&o+u<i&&a[u]===t[o+u];)u++;if(u===s)e=l,o+=u;else{if(o+u!==i||u!==i-o||r)return{};let e={};return l.findAllWords(e,t,r,n),e}}}let a={};return e.findAllWords(a,t,r,n),a}}contains(e){let t=this,r=0,n=e.length;for(;r<n;){let o=e[r],i=t.c.get(o);if(!i)return!1;{let o=i.s,a=o.length,l=0;for(;l<a&&r+l<n&&o[l]===e[r+l];)l++;if(l<a)return!1;r+=a,t=i}}return!0}removeWord(e){if(!e)return!1;let t=this,r=e.length,n=[];for(let o=0;o<r;o++){let r=e[o];if(!t.c.has(r))return!1;{let e=t.c.get(r);n.push({parent:t,character:r}),o+=e.s.length-1,t=e}}for(t.d.clear(),t.e=!1;n.length>0&&0===t.c.size&&!t.e&&0===t.d.size;){let{parent:e,character:r}=n.pop();e.c.delete(r),t=e}return!0}removeDocumentByWord(e,t,r=!0){if(!e)return!0;let n=this,o=e.length;for(let i=0;i<o;i++){let o=e[i];if(!n.c.has(o))return!1;{let a=n.c.get(o);i+=a.s.length-1,n=a,r&&n.w!==e||n.removeDocument(t)}}return!0}static getCommonPrefix(e,t){let r=Math.min(e.length,t.length),n=0;for(;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)n++;return e.slice(0,n)}toJSON(){return{w:this.w,s:this.s,e:this.e,k:this.k,d:Array.from(this.d),c:Array.from(this.c?.entries())?.map(([e,t])=>[e,t.toJSON()])}}static fromJSON(e){let t=new ea(e.k,e.s,e.e);return t.w=e.w,t.d=new Set(e.d),t.c=new Map(e?.c?.map(([e,t])=>[e,ea.fromJSON(t)])),t}}class el extends ea{constructor(){super("","",!1)}static fromJSON(e){let t=new el;return t.w=e.w,t.s=e.s,t.e=e.e,t.k=e.k,t.d=new Set(e.d),t.c=new Map(e.c?.map(([e,t])=>[e,ea.fromJSON(t)])),t}toJSON(){return super.toJSON()}}class es{point;docIDs;left;right;parent;constructor(e,t){this.point=e,this.docIDs=new Set(t),this.left=null,this.right=null,this.parent=null}toJSON(){return{point:this.point,docIDs:Array.from(this.docIDs),left:this.left?this.left.toJSON():null,right:this.right?this.right.toJSON():null}}static fromJSON(e,t=null){let r=new es(e.point,e.docIDs);return r.parent=t,e.left&&(r.left=es.fromJSON(e.left,r)),e.right&&(r.right=es.fromJSON(e.right,r)),r}}class eu{root;nodeMap;constructor(){this.root=null,this.nodeMap=new Map}getPointKey(e){return`${e.lon},${e.lat}`}insert(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);if(n)return void t.forEach(e=>n.docIDs.add(e));let o=new es(e,t);if(this.nodeMap.set(r,o),null==this.root){this.root=o;return}let i=this.root,a=0;for(;;){if(0==a%2)if(e.lon<i.point.lon){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}else if(e.lat<i.point.lat){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}a++}}contains(e){let t=this.getPointKey(e);return this.nodeMap.has(t)}getDocIDsByCoordinates(e){let t=this.getPointKey(e),r=this.nodeMap.get(t);return r?Array.from(r.docIDs):null}removeDocByID(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);n&&(n.docIDs.delete(t),0===n.docIDs.size&&(this.nodeMap.delete(r),this.deleteNode(n)))}deleteNode(e){let t=e.parent,r=e.left?e.left:e.right;r&&(r.parent=t),t?t.left===e?t.left=r:t.right===e&&(t.right=r):(this.root=r,this.root&&(this.root.parent=null))}searchByRadius(e,t,r=!0,n="asc",o=!1){let i=o?eu.vincentyDistance:eu.haversineDistance,a=[{node:this.root,depth:0}],l=[];for(;a.length>0;){let{node:n,depth:o}=a.pop();if(null==n)continue;let s=i(e,n.point);(r?s<=t:s>t)&&l.push({point:n.point,docIDs:Array.from(n.docIDs)}),null!=n.left&&a.push({node:n.left,depth:o+1}),null!=n.right&&a.push({node:n.right,depth:o+1})}return n&&l.sort((t,r)=>{let o=i(e,t.point),a=i(e,r.point);return"asc"===n.toLowerCase()?o-a:a-o}),l}searchByPolygon(e,t=!0,r=null,n=!1){let o=[{node:this.root,depth:0}],i=[];for(;o.length>0;){let{node:r,depth:n}=o.pop();if(null==r)continue;null!=r.left&&o.push({node:r.left,depth:n+1}),null!=r.right&&o.push({node:r.right,depth:n+1});let a=eu.isPointInPolygon(e,r.point);(a&&t||!a&&!t)&&i.push({point:r.point,docIDs:Array.from(r.docIDs)})}let a=eu.calculatePolygonCentroid(e);if(r){let e=n?eu.vincentyDistance:eu.haversineDistance;i.sort((t,n)=>{let o=e(a,t.point),i=e(a,n.point);return"asc"===r.toLowerCase()?o-i:i-o})}return i}toJSON(){return{root:this.root?this.root.toJSON():null}}static fromJSON(e){let t=new eu;return e.root&&(t.root=es.fromJSON(e.root),t.buildNodeMap(t.root)),t}buildNodeMap(e){if(null==e)return;let t=this.getPointKey(e.point);this.nodeMap.set(t,e),e.left&&this.buildNodeMap(e.left),e.right&&this.buildNodeMap(e.right)}static calculatePolygonCentroid(e){let t=0,r=0,n=0,o=e.length;for(let i=0,a=o-1;i<o;a=i++){let o=e[i].lon,l=e[i].lat,s=e[a].lon,u=e[a].lat,c=o*u-s*l;t+=c,r+=(o+s)*c,n+=(l+u)*c}let i=6*(t/=2);return{lon:r/=i,lat:n/=i}}static isPointInPolygon(e,t){let r=!1,n=t.lon,o=t.lat,i=e.length;for(let t=0,a=i-1;t<i;a=t++){let i=e[t].lon,l=e[t].lat,s=e[a].lon,u=e[a].lat;l>o!=u>o&&n<(s-i)*(o-l)/(u-l)+i&&(r=!r)}return r}static haversineDistance(e,t){let r=Math.PI/180,n=e.lat*r,o=t.lat*r,i=(t.lat-e.lat)*r,a=(t.lon-e.lon)*r,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(o)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3}static vincentyDistance(e,t){let r,n,o,i,a,l,s,u=1/298.257223563,c=(1-1/298.257223563)*6378137,d=Math.PI/180,f=e.lat*d,h=t.lat*d,p=(t.lon-e.lon)*d,m=Math.atan((1-u)*Math.tan(f)),g=Math.atan((1-u)*Math.tan(h)),y=Math.sin(m),b=Math.cos(m),v=Math.sin(g),S=Math.cos(g),w=p,I=1e3;do{let e=Math.sin(w),t=Math.cos(w);if(0===(n=Math.sqrt(S*e*(S*e)+(b*v-y*S*t)*(b*v-y*S*t))))return 0;i=Math.atan2(n,o=y*v+b*S*t),isNaN(s=o-2*y*v/(l=1-(a=b*S*e/n)*a))&&(s=0);let c=u/16*l*(4+u*(4-3*l));r=w,w=p+(1-c)*u*a*(i+c*n*(s+c*o*(-1+2*s*s)))}while(Math.abs(w-r)>1e-12&&--I>0);if(0===I)return NaN;let N=l*(0x24ffb2985f71-c*c)/(c*c),E=1+N/16384*(4096+N*(-768+N*(320-175*N))),T=N/1024*(256+N*(-128+N*(74-47*N)));return c*E*(i-T*n*(s+T/4*(o*(-1+2*s*s)-T/6*s*(-3+4*n*n)*(-3+4*s*s))))}}class ec{true;false;constructor(){this.true=new Set,this.false=new Set}insert(e,t){t?this.true.add(e):this.false.add(e)}delete(e,t){t?this.true.delete(e):this.false.delete(e)}getSize(){return this.true.size+this.false.size}toJSON(){return{true:Array.from(this.true),false:Array.from(this.false)}}static fromJSON(e){let t=new ec;return t.true=new Set(e.true),t.false=new Set(e.false),t}}class ed{size;vectors=new Map;constructor(e){this.size=e}add(e,t){t instanceof Float32Array||(t=new Float32Array(t));let r=ef(t,this.size);this.vectors.set(e,[r,t])}remove(e){this.vectors.delete(e)}find(e,t,r){return e instanceof Float32Array||(e=new Float32Array(e)),function(e,t,r,n,o){let i=ef(e,n),a=[];for(let l of t||r.keys()){let t=r.get(l);if(!t)continue;let s=t[0],u=t[1],c=0;for(let t=0;t<n;t++)c+=e[t]*u[t];let d=c/(i*s);d>=o&&a.push([l,d])}return a}(e,r,this.vectors,this.size,t)}toJSON(){let e=[];for(let[t,[r,n]]of this.vectors)e.push([t,[r,Array.from(n)]]);return{size:this.size,vectors:e}}static fromJSON(e){let t=new ed(e.size);for(let[r,[n,o]]of e.vectors)t.vectors.set(r,[n,new Float32Array(o)]);return t}}function ef(e,t){let r=0;for(let n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}function eh(e,t,r,n,o){let i=B(e.sharedInternalDocumentStore,r);e.avgFieldLength[t]=((e.avgFieldLength[t]??0)*(o-1)+n.length)/o,e.fieldLengths[t][i]=n.length,e.frequencies[t][i]={}}function ep(e,t,r,n,o){let i=0;for(let e of n)e===o&&i++;let a=B(e.sharedInternalDocumentStore,r),l=i/n.length;e.frequencies[t][a][o]=l,o in e.tokenOccurrences[t]||(e.tokenOccurrences[t][o]=0),e.tokenOccurrences[t][o]=(e.tokenOccurrences[t][o]??0)+1}function em(e,t,r,n){let o=B(e.sharedInternalDocumentStore,r);n>1?e.avgFieldLength[t]=(e.avgFieldLength[t]*n-e.fieldLengths[t][o])/(n-1):e.avgFieldLength[t]=void 0,e.fieldLengths[t][o]=void 0,e.frequencies[t][o]=void 0}function eg(e,t,r){e.tokenOccurrences[t][r]--}function ey(e,t,r,n,o,i,a,l,s,u,c){if(M(a)){var d,f,h,p,m;return d=t,f=r,h=i,p=0,m=o,void d.vectorIndexes[f].node.add(m,h)}let g=n=>{let{type:i,node:a}=t.indexes[r];switch(i){case"Bool":a[n?"true":"false"].add(o);break;case"AVL":{let e=c?.avlRebalanceThreshold??1;a.insert(n,o,e);break}case"Radix":{let i=s.tokenize(n,l,r,!1);for(let n of(e.insertDocumentScoreParameters(t,r,o,i,u),i))e.insertTokenScoreParameters(t,r,o,i,n),a.insert(n,o);break}case"Flat":a.insert(n,o);break;case"BKD":a.insert(n,[o])}};if(!L(a))return g(i);let y=i.length;for(let e=0;e<y;e++)g(i[e])}function eb(e,t,r,n,o,i,a,l,s,u){if(M(a))return t.vectorIndexes[r].node.remove(o),!0;let{type:c,node:d}=t.indexes[r];switch(c){case"AVL":return d.removeDocument(i,o),!0;case"Bool":return d[i?"true":"false"].delete(o),!0;case"Radix":{let a=s.tokenize(i,l,r);for(let i of(e.removeDocumentScoreParameters(t,r,n,u),a))e.removeTokenScoreParameters(t,r,i),d.removeDocumentByWord(i,o);return!0}case"Flat":return d.removeDocument(o,i),!0;case"BKD":return d.removeDocByID(i,o),!1}}function ev(e,t,r,n,o,i,a,l,s,u){if(!L(a))return eb(e,t,r,n,o,i,a,l,s,u);let c=C[a],d=i.length;for(let a=0;a<d;a++)eb(e,t,r,n,o,i[a],c,l,s,u);return!0}function eS(e,t,r,n,o,i,a,l,s,u){let c=Array.from(n),d=e.avgFieldLength[t],f=e.fieldLengths[t],h=e.tokenOccurrences[t],p=e.frequencies[t],m="number"==typeof h[r]?h[r]??0:0,g=c.length;for(let e=0;e<g;e++){let n=c[e];if(s&&!s.has(n))continue;u.has(n)||u.set(n,new Map);let h=u.get(n);h.set(t,(h.get(t)||0)+1);let g=function(e,t,r,n,o,{k:i,b:a,d:l}){return Math.log(1+(r-t+.5)/(t+.5))*(l+e*(i+1))/(e+i*(1-a+a*n/o))}(p?.[n]?.[r]??0,m,o,f[n],d,i);a.has(n)?a.set(n,a.get(n)+g*l):a.set(n,g*l)}}function ew(e,t,r,n,o,i,a,l,s,u,c,d=0){let f=r.tokenize(t,n),h=f.length||1,p=new Map,m=new Map,g=new Map;for(let r of o){if(!(r in e.indexes))continue;let n=e.indexes[r],{type:o}=n;if("Radix"!==o)throw P("WRONG_SEARCH_PROPERTY_TYPE",r);let d=l[r]??1;if(d<=0)throw P("INVALID_BOOST_VALUE",d);0!==f.length||t||f.push("");let h=f.length;for(let t=0;t<h;t++){let o=f[t],l=n.node.find({term:o,exact:i,tolerance:a}),h=Object.keys(l);h.length>0&&m.set(o,!0);let y=h.length;for(let t=0;t<y;t++){let n=h[t],o=l[n];eS(e,r,n,o,u,s,g,d,c,p)}}}let y=Array.from(g.entries()).map(([e,t])=>[e,t]).sort((e,t)=>t[1]-e[1]);if(0===y.length)return[];if(1===d)return y;if(0===d){if(1===h)return y;for(let e of f)if(!m.get(e))return[];return y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)})}let b=y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)});if(b.length>0){let e=y.filter(([e])=>!b.some(([t])=>t===e)),t=Math.ceil(e.length*d);return[...b,...e.slice(0,t)]}return y}function eI(e){return e.searchableProperties}function eN(e){return e.searchablePropertiesWithTypes}function eE(e,t){let{indexes:r,vectorIndexes:n,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:l,avgFieldLength:s,fieldLengths:u}=t,c={},d={};for(let e of Object.keys(r)){let{node:t,type:n,isArray:o}=r[e];switch(n){case"Radix":c[e]={type:"Radix",node:el.fromJSON(t),isArray:o};break;case"Flat":c[e]={type:"Flat",node:eo.fromJSON(t),isArray:o};break;case"AVL":c[e]={type:"AVL",node:en.fromJSON(t),isArray:o};break;case"BKD":c[e]={type:"BKD",node:eu.fromJSON(t),isArray:o};break;case"Bool":c[e]={type:"Bool",node:ec.fromJSON(t),isArray:o};break;default:c[e]=r[e]}}for(let e of Object.keys(n))d[e]={type:"Vector",isArray:!1,node:ed.fromJSON(n[e])};return{sharedInternalDocumentStore:e,indexes:c,vectorIndexes:d,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:l,avgFieldLength:s,fieldLengths:u}}function eT(e){let{indexes:t,vectorIndexes:r,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:l,fieldLengths:s}=e,u={};for(let e of Object.keys(r))u[e]=r[e].node.toJSON();let c={};for(let e of Object.keys(t)){let{type:r,node:n,isArray:o}=t[e];"Flat"===r||"Radix"===r||"AVL"===r||"BKD"===r||"Bool"===r?c[e]={type:r,node:n.toJSON(),isArray:o}:(c[e]=t[e],c[e].node=c[e].node.toJSON())}return{indexes:c,vectorIndexes:u,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:l,fieldLengths:s}}function eO(e,t){e||(e=new Set);let r=t.length;for(let n=0;n<r;n++){let r=t[n].docIDs,o=r.length;for(let t=0;t<o;t++)e.add(r[t])}return e}function ex(e,t,r,n){return n?.enabled===!1?{disabled:!0}:function e(t,r,n,o,i){let a={language:t.tokenizer.language,sharedInternalDocumentStore:r,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(let[l,s]of Object.entries(n)){let n=`${i}${i?".":""}${l}`;if(!o.includes(n)){if("object"==typeof s&&!Array.isArray(s)){let i=e(t,r,s,o,n);f(a.sortableProperties,i.sortableProperties),a.sorts={...a.sorts,...i.sorts},a.sortablePropertiesWithTypes={...a.sortablePropertiesWithTypes,...i.sortablePropertiesWithTypes};continue}if(!M(s))switch(s){case"boolean":case"number":case"string":a.sortableProperties.push(n),a.sortablePropertiesWithTypes[n]=s,a.sorts[n]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:s};break;case"geopoint":case"enum":case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw P("INVALID_SORT_SCHEMA_TYPE",Array.isArray(s)?"array":s,n)}}}return a}(e,t,r,(n||{}).unsortableProperties||[],"")}function eD(e,t,r,n){if(!e.enabled)return;e.isSorted=!1;let o=B(e.sharedInternalDocumentStore,r),i=e.sorts[t];i.orderedDocsToRemove.has(o)&&ek(e,t),i.docs.set(o,i.orderedDocs.length),i.orderedDocs.push([o,n])}function e_(e){if(!e.isSorted&&e.enabled){for(let t of Object.keys(e.sorts))!function(e,t){let r,n=e.sorts[t];switch(n.type){case"string":r=eP.bind(null,e.language);break;case"number":r=eA.bind(null);break;case"boolean":r=eR.bind(null)}n.orderedDocs.sort(r);let o=n.orderedDocs.length;for(let e=0;e<o;e++){let t=n.orderedDocs[e][0];n.docs.set(t,e)}}(e,t);e.isSorted=!0}}function eP(e,t,r){return t[1].localeCompare(r[1],void 0!==e&&i.includes(e)?n[e]:void 0)}function eA(e,t){return e[1]-t[1]}function eR(e,t){return t[1]?-1:1}function ek(e,t){let r=e.sorts[t];r.orderedDocsToRemove.size&&(r.orderedDocs=r.orderedDocs.filter(e=>!r.orderedDocsToRemove.has(e[0])),r.orderedDocsToRemove.clear())}function eC(e,t,r){if(!e.enabled)return;let n=e.sorts[t],o=B(e.sharedInternalDocumentStore,r);n.docs.get(o)&&(n.docs.delete(o),n.orderedDocsToRemove.set(o,!0))}function eM(e,t,r){if(!e.enabled)throw P("SORT_DISABLED");let n=r.property,o="DESC"===r.order,i=e.sorts[n];if(!i)throw P("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",n,e.sortableProperties.join(", "));return ek(e,n),e_(e),t.sort((t,r)=>{let n=i.docs.get(B(e.sharedInternalDocumentStore,t[0])),a=i.docs.get(B(e.sharedInternalDocumentStore,r[0])),l=void 0!==n,s=void 0!==a;return l||s?l?s?o?a-n:n-a:-1:1:0}),t}function eL(e){return e.enabled?e.sortableProperties:[]}function ej(e){return e.enabled?e.sortablePropertiesWithTypes:{}}function eU(e,t){if(!t.enabled)return{enabled:!1};let r=Object.keys(t.sorts).reduce((e,r)=>{let{docs:n,orderedDocs:o,type:i}=t.sorts[r];return e[r]={docs:new Map(Object.entries(n).map(([e,t])=>[+e,t])),orderedDocsToRemove:new Map,orderedDocs:o,type:i},e},{});return{sharedInternalDocumentStore:e,language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:r,enabled:!0,isSorted:t.isSorted}}function ez(e){if(!e.enabled)return{enabled:!1};for(let t of Object.keys(e.sorts))ek(e,t);e_(e);let t=Object.keys(e.sorts).reduce((t,r)=>{let{docs:n,orderedDocs:o,type:i}=e.sorts[r];return t[r]={docs:Object.fromEntries(n.entries()),orderedDocs:o,type:i},t},{});return{language:e.language,sortableProperties:e.sortableProperties,sortablePropertiesWithTypes:e.sortablePropertiesWithTypes,sorts:t,enabled:e.enabled,isSorted:e.isSorted}}let eB=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115],eF={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},eW={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},eV="[aeiouy]",e$="[^aeiou][^aeiouy]*",eH=eV+"[aeiou]*",eJ="^("+e$+")?"+eH+e$,eY="^("+e$+")?"+eH+e$+"("+eH+")?$",eG="^("+e$+")?"+eH+e$+eH+e$,eK="^("+e$+")?"+eV;function eX(e){let t,r,n,o,i,a;if(e.length<3)return e;let l=e.substring(0,1);if("y"==l&&(e=l.toUpperCase()+e.substring(1)),o=/^(.+?)([^s])s$/,(n=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(n,"$1$2"):o.test(e)&&(e=e.replace(o,"$1$2")),o=/^(.+?)(ed|ing)$/,(n=/^(.+?)eed$/).test(e)){let t=n.exec(e);(n=new RegExp(eJ)).test(t[1])&&(n=/.$/,e=e.replace(n,""))}else o.test(e)&&(t=o.exec(e)[1],(o=new RegExp(eK)).test(t)&&(e=t,o=/(at|bl|iz)$/,i=RegExp("([^aeiouylsz])\\1$"),a=RegExp("^"+e$+eV+"[^aeiouwxy]$"),o.test(e)?e+="e":i.test(e)?(n=/.$/,e=e.replace(n,"")):a.test(e)&&(e+="e")));if((n=/^(.+?)y$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(eK),t&&n.test(t)&&(e=t+"i")}if((n=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eJ),t&&n.test(t)&&(e=t+eF[r])}if((n=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eJ),t&&n.test(t)&&(e=t+eW[r])}if(o=/^(.+?)(s|t)(ion)$/,(n=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(eG),t&&n.test(t)&&(e=t)}else if(o.test(e)){let r=o.exec(e);t=r?.[1]??""+r?.[2]??"",(o=new RegExp(eG)).test(t)&&(e=t)}if((n=/^(.+?)e$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(eG),o=new RegExp(eY),i=RegExp("^"+e$+eV+"[^aeiouwxy]$"),t&&(n.test(t)||o.test(t)&&!i.test(t))&&(e=t)}return n=/ll$/,o=new RegExp(eG),n.test(e)&&o.test(e)&&(n=/.$/,e=e.replace(n,"")),"y"==l&&(e=l.toLowerCase()+e.substring(1)),e}function eq(e,t,r=!0){let n=`${this.language}:${e}:${t}`;return r&&this.normalizationCache.has(n)?this.normalizationCache.get(n):this.stopWords?.includes(t)?(r&&this.normalizationCache.set(n,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(e)&&(t=this.stemmer(t)),t=function(e){let t=[];for(let n=0;n<e.length;n++){var r;t[n]=(r=e.charCodeAt(n))<192||r>383?r:eB[r-192]||r}return String.fromCharCode(...t)}(t),r&&this.normalizationCache.set(n,t),t)}function eZ(e,t,r,n=!0){let i;if(t&&t!==this.language)throw P("LANGUAGE_NOT_SUPPORTED",t);if("string"!=typeof e)return[e];let a=this.normalizeToken.bind(this,r??"");if(r&&this.tokenizeSkipProperties.has(r))i=[a(e,n)];else{let t=o[this.language];i=e.toLowerCase().split(t).map(e=>a(e,n)).filter(Boolean)}let l=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e}(i);return this.allowDuplicates?l:Array.from(new Set(l))}function eQ(e={}){let t,r;if(e.language){if(!i.includes(e.language))throw P("LANGUAGE_NOT_SUPPORTED",e.language)}else e.language="english";if(e.stemming||e.stemmer&&!("stemming"in e))if(e.stemmer){if("function"!=typeof e.stemmer)throw P("INVALID_STEMMER_FUNCTION_TYPE");t=e.stemmer}else if("english"===e.language)t=eX;else throw P("MISSING_STEMMER",e.language);if(!1!==e.stopWords){if(r=[],Array.isArray(e.stopWords))r=e.stopWords;else if("function"==typeof e.stopWords)r=e.stopWords(r);else if(e.stopWords)throw P("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(r))throw P("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(let e of r)if("string"!=typeof e)throw P("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}let n={tokenize:eZ,language:e.language,stemmer:t,stemmerSkipProperties:new Set(e.stemmerSkipProperties?[e.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(e.tokenizeSkipProperties?[e.tokenizeSkipProperties].flat():[]),stopWords:r,allowDuplicates:!!e.allowDuplicates,normalizeToken:eq,normalizationCache:new Map};return n.tokenize=eZ.bind(n),n.normalizeToken=eq,n}function e0({schema:e,sort:t,language:r,components:n,id:o,plugins:i}){for(let t of(n||(n={}),i??[])){if(!("getComponents"in t)||"function"!=typeof t.getComponents)continue;let r=t.getComponents(e);for(let e of Object.keys(r))if(n[e])throw P("PLUGIN_COMPONENT_CONFLICT",e,t.name);n={...n,...r}}o||(o=g());let a=n.tokenizer,l=n.index,s=n.documentsStore,u=n.sorter;if(a=a?a.tokenize?a:eQ(a):eQ({language:r??"english"}),n.tokenizer&&r)throw P("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");let c={idToInternalId:new Map,internalIdToId:[],save:U,load:z};l||={create:function e(t,r,n,o,i=""){for(let[a,l]of(o||(o={sharedInternalDocumentStore:r,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}}),Object.entries(n))){let n=`${i}${i?".":""}${a}`;if("object"==typeof l&&!Array.isArray(l)){e(t,r,l,o,n);continue}if(M(l))o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=l,o.vectorIndexes[n]={type:"Vector",node:new ed(j(l)),isArray:!1};else{let e=/\[/.test(l);switch(l){case"boolean":case"boolean[]":o.indexes[n]={type:"Bool",node:new ec,isArray:e};break;case"number":case"number[]":o.indexes[n]={type:"AVL",node:new en(0,[]),isArray:e};break;case"string":case"string[]":o.indexes[n]={type:"Radix",node:new el,isArray:e},o.avgFieldLength[n]=0,o.frequencies[n]={},o.tokenOccurrences[n]={},o.fieldLengths[n]={};break;case"enum":case"enum[]":o.indexes[n]={type:"Flat",node:new eo,isArray:e};break;case"geopoint":o.indexes[n]={type:"BKD",node:new eu,isArray:e};break;default:throw P("INVALID_SCHEMA_TYPE",Array.isArray(l)?"array":l,n)}o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=l}}return o},insert:ey,remove:ev,insertDocumentScoreParameters:eh,insertTokenScoreParameters:ep,removeDocumentScoreParameters:em,removeTokenScoreParameters:eg,calculateResultScores:eS,search:ew,searchByWhereClause:function e(t,r,n,o){if("and"in n&&n.and&&Array.isArray(n.and)){let i=n.and;return 0===i.length?new Set:T(...i.map(n=>e(t,r,n,o)))}if("or"in n&&n.or&&Array.isArray(n.or)){let i=n.or;return 0===i.length?new Set:i.map(n=>e(t,r,n,o)).reduce((e,t)=>x(e,t),new Set)}if("not"in n&&n.not){let i=n.not,a=new Set,l=t.sharedInternalDocumentStore;for(let e=1;e<=l.internalIdToId.length;e++)a.add(e);let s=e(t,r,i,o),u=new Set;for(let e of a)s.has(e)||u.add(e);return u}let i=Object.keys(n),a=i.reduce((e,t)=>({[t]:new Set,...e}),{});for(let e of i){let i=n[e];if(void 0===t.indexes[e])throw P("UNKNOWN_FILTER_PROPERTY",e);let{node:l,type:s,isArray:u}=t.indexes[e];if("Bool"===s){let t=i?l.true:l.false;a[e]=x(a[e],t);continue}if("BKD"===s){let t;if("radius"in i)t="radius";else if("polygon"in i)t="polygon";else throw Error(`Invalid operation ${i}`);if("radius"===t){let{value:r,coordinates:n,unit:o="m",inside:s=!0,highPrecision:u=!1}=i[t],c=function(e,t){let r=w[t];if(void 0===r)throw Error(P("INVALID_DISTANCE_SUFFIX",e).message);return e*r}(r,o),d=l.searchByRadius(n,c,s,void 0,u);a[e]=eO(a[e],d)}else{let{coordinates:r,inside:n=!0,highPrecision:o=!1}=i[t],s=l.searchByPolygon(r,n,void 0,o);a[e]=eO(a[e],s)}continue}if("Radix"===s&&("string"==typeof i||Array.isArray(i))){for(let t of[i].flat())for(let n of r.tokenize(t,o,e)){let t=l.find({term:n,exact:!0});a[e]=function(e,t){e||(e=new Set);let r=Object.keys(t),n=r.length;for(let o=0;o<n;o++){let n=t[r[o]],i=n.length;for(let t=0;t<i;t++)e.add(n[t])}return e}(a[e],t)}continue}let c=Object.keys(i);if(c.length>1)throw P("INVALID_FILTER_OPERATION",c.length);if("Flat"===s){let t=new Set(u?l.filterArr(i):l.filter(i));a[e]=x(a[e],t);continue}if("AVL"===s){let t,r=c[0],n=i[r];switch(r){case"gt":t=l.greaterThan(n,!1);break;case"gte":t=l.greaterThan(n,!0);break;case"lt":t=l.lessThan(n,!1);break;case"lte":t=l.lessThan(n,!0);break;case"eq":t=l.find(n)??new Set;break;case"between":{let[e,r]=n;t=l.rangeSearch(e,r);break}default:throw P("INVALID_FILTER_OPERATION",r)}a[e]=x(a[e],t)}}return T(...Object.values(a))},getSearchableProperties:eI,getSearchablePropertiesWithTypes:eN,load:eE,save:eT},u||={create:ex,insert:eD,remove:eC,save:ez,load:eU,sortBy:eM,getSortableProperties:eL,getSortablePropertiesWithTypes:ej},s||={create:W,get:V,getMultiple:$,getAll:H,store:J,remove:Y,count:G,load:K,save:X};var d=n;let f={formatElapsedTime:A,getDocumentIndexId:R,getDocumentProperties:v,validateSchema:function e(t,r){for(let[n,o]of Object.entries(r)){let r=t[n];if(void 0!==r&&("geopoint"!==o||"object"!=typeof r||"number"!=typeof r.lon||"number"!=typeof r.lat)&&("enum"!==o||"string"!=typeof r&&"number"!=typeof r)){if("enum[]"===o&&Array.isArray(r)){let e=r.length;for(let t=0;t<e;t++)if("string"!=typeof r[t]&&"number"!=typeof r[t])return n+"."+t;continue}if(M(o)){let e=j(o);if(!Array.isArray(r)||r.length!==e)throw P("INVALID_INPUT_VECTOR",n,e,r.length);continue}if(L(o)){if(!Array.isArray(r))return n;let e=C[o],t=r.length;for(let o=0;o<t;o++)if(typeof r[o]!==e)return n+"."+o;continue}if("object"==typeof o){if(!r||"object"!=typeof r)return n;let t=e(r,o);if(t)return n+"."+t;continue}if(typeof r!==o)return n}}}};for(let e of Q)if(d[e]){if("function"!=typeof d[e])throw P("COMPONENT_MUST_BE_FUNCTION",e)}else d[e]=f[e];for(let e of Object.keys(d))if(!Z.includes(e)&&!Q.includes(e))throw P("UNSUPPORTED_COMPONENT",e);let{getDocumentProperties:h,getDocumentIndexId:p,validateSchema:m,formatElapsedTime:y}=n,b={data:{},caches:{},schema:e,tokenizer:a,index:l,sorter:u,documentsStore:s,internalDocumentIDStore:c,getDocumentProperties:h,getDocumentIndexId:p,validateSchema:m,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeUpsert:[],afterUpsert:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],beforeUpdateMultiple:[],afterUpdateMultiple:[],beforeUpsertMultiple:[],afterUpsertMultiple:[],afterCreate:[],formatElapsedTime:y,id:o,plugins:i,version:"{{VERSION}}"};for(let r of(b.data={index:b.index.create(b,c,e),docs:b.documentsStore.create(b,c),sorting:b.sorter.create(b,c,e,t)},q))b[r]=(b[r]??[]).concat(function(e,t){let r=[],n=e.plugins?.length;if(!n)return r;for(let o=0;o<n;o++)try{let n=e.plugins[o];"function"==typeof n[t]&&r.push(n[t])}catch(e){throw console.error("Caught error in getAllPluginsByHook:",e),P("PLUGIN_CRASHED")}return r}(b,r));let S=b.afterCreate;return S&&function(e,t){if(e.some(N))return(async()=>{for(let r of e)await r(t)})();for(let r of e)r(t)}(S,b),b}function e1(e,t){return e.documentsStore.get(e.data.docs,t)}function e9(e,t,r,n,o){let i=e.validateSchema(t,e.schema);if(i)throw createError("SCHEMA_VALIDATION_FAILURE",i);return isAsyncFunction(e.beforeInsert)||isAsyncFunction(e.afterInsert)||isAsyncFunction(e.index.beforeInsert)||isAsyncFunction(e.index.insert)||isAsyncFunction(e.index.afterInsert)?e5(e,t,r,n,o):function(e,t,r,n,o){let{index:i,docs:a}=e.data,l=e.getDocumentIndexId(t);if("string"!=typeof l)throw createError("DOCUMENT_ID_MUST_BE_STRING",typeof l);let s=getInternalDocumentId(e.internalDocumentIDStore,l);if(!e.documentsStore.store(a,l,s,t))throw createError("DOCUMENT_ALREADY_EXISTS",l);let u=e.documentsStore.count(a);n||runSingleHook(e.beforeInsert,e,l,t);let c=e.index.getSearchableProperties(i),d=e.index.getSearchablePropertiesWithTypes(i),f=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(f))void 0!==t&&e6(typeof t,d[e],e,t);return function(e,t,r,n,o,i,a,l){for(let a of r){let r=n[a];if(void 0===r)continue;let s=e.index.getSearchablePropertiesWithTypes(e.data.index)[a],u=getInternalDocumentId(e.internalDocumentIDStore,t);e.index.beforeInsert?.(e.data.index,a,t,r,s,i,e.tokenizer,o),e.index.insert(e.index,e.data.index,a,t,u,r,s,i,e.tokenizer,o,l),e.index.afterInsert?.(e.data.index,a,t,r,s,i,e.tokenizer,o)}let s=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(a,s);for(let r of s){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}(e,l,c,f,u,r,t,o),n||runSingleHook(e.afterInsert,e,l,t),l}(e,t,r,n,o)}let e7=new Set(["enum","enum[]"]),e2=new Set(["string","number"]);async function e5(e,t,r,n,o){let{index:i,docs:a}=e.data,l=e.getDocumentIndexId(t);if("string"!=typeof l)throw createError("DOCUMENT_ID_MUST_BE_STRING",typeof l);let s=getInternalDocumentId(e.internalDocumentIDStore,l);if(!e.documentsStore.store(a,l,s,t))throw createError("DOCUMENT_ALREADY_EXISTS",l);let u=e.documentsStore.count(a);n||await runSingleHook(e.beforeInsert,e,l,t);let c=e.index.getSearchableProperties(i),d=e.index.getSearchablePropertiesWithTypes(i),f=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(f))void 0!==t&&e6(typeof t,d[e],e,t);return await e3(e,l,c,f,u,r,t,o),n||await runSingleHook(e.afterInsert,e,l,t),l}function e6(e,t,r,n){if(!(isGeoPointType(t)&&"object"==typeof n&&"number"==typeof n.lon&&"number"==typeof n.lat||isVectorType(t)&&Array.isArray(n)||isArrayType(t)&&Array.isArray(n))&&!(e7.has(t)&&e2.has(e))&&e!==t)throw createError("INVALID_DOCUMENT_PROPERTY",r,t,e)}async function e3(e,t,r,n,o,i,a,l){for(let a of r){let r=n[a];if(void 0===r)continue;let s=e.index.getSearchablePropertiesWithTypes(e.data.index)[a];await e.index.beforeInsert?.(e.data.index,a,t,r,s,i,e.tokenizer,o);let u=e.internalDocumentIDStore.idToInternalId.get(t);await e.index.insert(e.index,e.data.index,a,t,u,r,s,i,e.tokenizer,o,l),await e.index.afterInsert?.(e.data.index,a,t,r,s,i,e.tokenizer,o)}let s=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(a,s);for(let r of s){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}async function e8(e,t,r,n){let o=!0,{index:i,docs:a}=e.data,l=e.documentsStore.get(a,t);if(!l)return!1;let s=getInternalDocumentId(e.internalDocumentIDStore,t),u=getDocumentIdFromInternalId(e.internalDocumentIDStore,s),c=e.documentsStore.count(a);n||await runSingleHook(e.beforeRemove,e,u);let d=e.index.getSearchableProperties(i),f=e.index.getSearchablePropertiesWithTypes(i),h=e.getDocumentProperties(l,d);for(let n of d){let i=h[n];if(void 0===i)continue;let a=f[n];await e.index.beforeRemove?.(e.data.index,n,u,i,a,r,e.tokenizer,c),await e.index.remove(e.index,e.data.index,n,t,s,i,a,r,e.tokenizer,c)||(o=!1),await e.index.afterRemove?.(e.data.index,n,u,i,a,r,e.tokenizer,c)}let p=await e.sorter.getSortableProperties(e.data.sorting),m=await e.getDocumentProperties(l,p);for(let r of p)void 0!==m[r]&&e.sorter.remove(e.data.sorting,r,t);return n||await runSingleHook(e.afterRemove,e,u),e.documentsStore.remove(e.data.docs,t,s),o}let e4="fulltext";function te(e,t){return e[1]-t[1]}function tt(e,t){return t[1]-e[1]}function tr(e,t,r){let n={},o=t.map(([e])=>e),i=e.documentsStore.getMultiple(e.data.docs,o),a=Object.keys(r),l=e.index.getSearchablePropertiesWithTypes(e.data.index);for(let e of a){let t;if("number"===l[e]){let{ranges:n}=r[e],o=n.length,i=Array.from({length:o});for(let e=0;e<o;e++){let t=n[e];i[e]=[`${t.from}-${t.to}`,0]}t=Object.fromEntries(i)}n[e]={count:0,values:t??{}}}let s=i.length;for(let e=0;e<s;e++){let t=i[e];for(let e of a){let o=e.includes(".")?S(t,e):t[e],i=l[e],a=n[e].values;switch(i){case"number":tn(r[e].ranges,a)(o);break;case"number[]":{let t=new Set,n=tn(r[e].ranges,a,t);for(let e of o)n(e);break}case"boolean":case"enum":case"string":to(a,i)(o);break;case"boolean[]":case"enum[]":case"string[]":{let e=to(a,"boolean[]"===i?"boolean":"string",new Set);for(let t of o)e(t);break}default:throw P("FACET_NOT_SUPPORTED",i)}}}for(let e of a){let t=n[e];if(t.count=Object.keys(t.values).length,"string"===l[e]){let n=r[e],o=function(e="desc"){return"asc"===e.toLowerCase()?te:tt}(n.sort);t.values=Object.fromEntries(Object.entries(t.values).sort(o).slice(n.offset??0,n.limit??10))}}return n}function tn(e,t,r){return n=>{for(let o of e){let e=`${o.from}-${o.to}`;!r?.has(e)&&n>=o.from&&n<=o.to&&(void 0===t[e]?t[e]=1:(t[e]++,r?.add(e)))}}}function to(e,t,r){let n="boolean"===t?"false":"";return t=>{let o=t?.toString()??n;r?.has(o)||(e[o]=(e[o]??0)+1,r?.add(o))}}let ti={reducer:(e,t,r,n)=>(t[n]=r,t),getInitialValue:e=>Array.from({length:e})},ta=["string","number","boolean"];function tl(e,t,r){let n=r.properties,o=n.length,i=e.index.getSearchablePropertiesWithTypes(e.data.index);for(let e=0;e<o;e++){let t=n[e];if(void 0===i[t])throw P("UNKNOWN_GROUP_BY_PROPERTY",t);if(!ta.includes(i[t]))throw P("INVALID_GROUP_BY_PROPERTY",t,ta.join(", "),i[t])}let a=t.map(([t])=>F(e.internalDocumentIDStore,t)),l=e.documentsStore.getMultiple(e.data.docs,a),s=l.length,u=r.maxResult||Number.MAX_SAFE_INTEGER,c=[],d={};for(let e=0;e<o;e++){let t=n[e],r={property:t,perValue:{}},o=new Set;for(let e=0;e<s;e++){let n=S(l[e],t);if(void 0===n)continue;let i="boolean"!=typeof n?n:""+n,a=r.perValue[i]??{indexes:[],count:0};a.count>=u||(a.indexes.push(e),a.count++,r.perValue[i]=a,o.add(n))}c.push(Array.from(o)),d[t]=r}let h=function e(t,r=0){if(r+1===t.length)return t[r].map(e=>[e]);let n=t[r],o=e(t,r+1),i=[];for(let e of n)for(let t of o){let r=[e];f(r,t),i.push(r)}return i}(c),p=h.length,m=[];for(let e=0;e<p;e++){let t=h[e],r=t.length,o={values:[],indexes:[]},i=[];for(let e=0;e<r;e++){let r=t[e],a=n[e];i.push(d[a].perValue["boolean"!=typeof r?r:""+r].indexes),o.values.push(r)}o.indexes=(function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(let t=1;t<e.length;t++)if(e[t].length<e[0].length){let r=e[0];e[0]=e[t],e[t]=r}let t=new Map;for(let r of e[0])t.set(r,1);for(let r=1;r<e.length;r++){let n=0;for(let o of e[r]){let e=t.get(o);e===r&&(t.set(o,e+1),n++)}if(0===n)return[]}return e[0].filter(r=>{let n=t.get(r);return void 0!==n&&t.set(r,0),n===e.length})})(i).sort((e,t)=>e-t),0!==o.indexes.length&&m.push(o)}let g=m.length,y=Array.from({length:g});for(let e=0;e<g;e++){let n=m[e],o=r.reduce||ti,i=n.indexes.map(e=>({id:a[e],score:t[e][1],document:l[e]})),s=o.reducer.bind(null,n.values),u=o.getInitialValue(n.indexes.length),c=i.reduce(s,u);y[e]={values:n.values,result:c}}return y}function ts(e,t,r){let n,o,{term:i,properties:a}=t,l=e.data.index,s=e.caches.propertiesToSearch;if(!s){let t=e.index.getSearchablePropertiesWithTypes(l);s=(s=e.index.getSearchableProperties(l)).filter(e=>t[e].startsWith("string")),e.caches.propertiesToSearch=s}if(a&&"*"!==a){for(let e of a)if(!s.includes(e))throw P("UNKNOWN_INDEX",e,s.join(", "));s=s.filter(e=>a.includes(e))}Object.keys(t.where??{}).length>0&&(n=e.index.searchByWhereClause(l,e.tokenizer,t.where,r));let u=void 0!==t.threshold&&null!==t.threshold?t.threshold:1;if(i||a){let a=e.documentsStore.count(e.data.docs);o=e.index.search(l,i||"",e.tokenizer,r,s,t.exact||!1,t.tolerance||0,t.boost||{},function(e){let t=e??{};return t.k=t.k??tu.k,t.b=t.b??tu.b,t.d=t.d??tu.d,t}(t.relevance),a,n,u)}else o=(n?Array.from(n):Object.keys(e.documentsStore.getAll(e.data.docs))).map(e=>[+e,0]);return o}let tu={k:1.2,b:.75,d:.5};function tc(e,t,r){let n,o=t.vector;if(o&&(!("value"in o)||!("property"in o)))throw P("INVALID_VECTOR_INPUT",Object.keys(o).join(", "));let i=e.data.index.vectorIndexes[o.property],a=i.node.size;if(o?.value.length!==a){if(o?.property===void 0||o?.value.length===void 0)throw P("INVALID_INPUT_VECTOR","undefined",a,"undefined");throw P("INVALID_INPUT_VECTOR",o.property,a,o.value.length)}let l=e.data.index;return Object.keys(t.where??{}).length>0&&(n=e.index.searchByWhereClause(l,e.tokenizer,t.where,r)),i.node.find(o.value,t.similarity??.8,n)}function td(e){return e[1]}function tf(e,t,r){let n=t.mode??e4;if(n===e4){let n=m();function o(){let o,i=Object.keys(e.data.index.vectorIndexes),a=t.facets&&Object.keys(t.facets).length>0,{limit:l=10,offset:s=0,distinctOn:u,includeVectors:c=!1}=t,d=!0===t.preflight,f=ts(e,t,r);if(t.sortBy)if("function"==typeof t.sortBy){let r=f.map(([e])=>e),n=e.documentsStore.getMultiple(e.data.docs,r).map((e,t)=>[f[t][0],f[t][1],e]);n.sort(t.sortBy),f=n.map(([e,t])=>[e,t])}else f=e.sorter.sortBy(e.data.sorting,f,t.sortBy).map(([t,r])=>[B(e.internalDocumentIDStore,t),r]);else f=f.sort(b);d||(o=u?function(e,t,r,n,o){let i=e.data.docs,a=new Map,l=[],s=new Set,u=t.length,c=0;for(let d=0;d<u;d++){let u=t[d];if(void 0===u)continue;let[f,h]=u;if(s.has(f))continue;let p=e.documentsStore.get(i,f),m=S(p,o);if(!(void 0===m||a.has(m))&&(a.set(m,!0),!(++c<=r)&&(l.push({id:F(e.internalDocumentIDStore,f),score:h,document:p}),s.add(f),c>=r+n)))break}return l}(e,f,s,l,u):th(e,f,s,l));let h={elapsed:{formatted:"",raw:0},hits:[],count:f.length};return void 0!==o&&(h.hits=o.filter(Boolean),c||I(h,i)),a&&(h.facets=tr(e,f,t.facets)),t.groupBy&&(h.groups=tl(e,f,t.groupBy)),h.elapsed=e.formatElapsedTime(m()-n),h}async function i(){e.beforeSearch&&await et(e.beforeSearch,e,t,r);let n=o();return e.afterSearch&&await ee(e.afterSearch,e,t,r,n),n}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}if("vector"===n)return function(e,t,r="english"){let n=m();function o(){let o=tc(e,t,r).sort(b),i=[];t.facets&&Object.keys(t.facets).length>0&&(i=tr(e,o,t.facets));let a=t.vector.property,l=t.includeVectors??!1,s=t.limit??10,u=t.offset??0,c=Array.from({length:s});for(let t=0;t<s;t++){let r=o[t+u];if(!r)break;let n=e.data.docs.docs[r[0]];if(n){l||(n[a]=null);let o={id:F(e.internalDocumentIDStore,r[0]),score:r[1],document:n};c[t]=o}}let d=[];t.groupBy&&(d=tl(e,o,t.groupBy));let f=m()-n;return{count:o.length,hits:c.filter(Boolean),elapsed:{raw:Number(f),formatted:p(f)},...i?{facets:i}:{},...d?{groups:d}:{}}}async function i(){e.beforeSearch&&await et(e.beforeSearch,e,t,r);let n=o();return e.afterSearch&&await ee(e.afterSearch,e,t,r,n),n}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}(e,t);if("hybrid"===n)return function(e,t,r){let n=m();function o(){let r,o,i=function(e,t,r){let n=function(e){let t=Math.max.apply(Math,e.map(td));return e.map(([e,r])=>[e,r/t])}(ts(e,t,r)),o=tc(e,t,r),i=t.hybridWeights;return function(e,t,r,n){var o;let i=Math.max.apply(Math,e.map(td)),a=Math.max.apply(Math,t.map(td)),{text:l,vector:s}=n&&n.text&&n.vector?n:(o=0,{text:.5,vector:.5}),u=new Map,c=e.length,d=(e,t)=>e*l+t*s;for(let t=0;t<c;t++){let[r,n]=e[t],o=d(n/i,0);u.set(r,o)}let f=t.length;for(let e=0;e<f;e++){let[r,n]=t[e],o=n/a,i=u.get(r)??0;u.set(r,i+d(0,o))}return[...u].sort((e,t)=>t[1]-e[1])}(n,o,t.term??"",i)}(e,t,void 0);t.facets&&Object.keys(t.facets).length>0&&(r=tr(e,i,t.facets)),t.groupBy&&(o=tl(e,i,t.groupBy));let a=th(e,i,t.offset??0,t.limit??10).filter(Boolean),l=m(),s={count:i.length,elapsed:{raw:Number(l-n),formatted:p(l-n)},hits:a,...r?{facets:r}:{},...o?{groups:o}:{}};return t.includeVectors||I(s,Object.keys(e.data.index.vectorIndexes)),s}async function i(){e.beforeSearch&&await et(e.beforeSearch,e,t,void 0);let n=o();return e.afterSearch&&await ee(e.afterSearch,e,t,r,n),n}return e.beforeSearch?.length||e.afterSearch?.length?i():o()}(e,t);throw P("INVALID_SEARCH_MODE",n)}function th(e,t,r,n){let o=e.data.docs,i=Array.from({length:n}),a=new Set;for(let l=r;l<n+r;l++){let r=t[l];if(void 0===r)break;let[n,s]=r;if(!a.has(n)){let t=e.documentsStore.get(o,n);i[l]={id:F(e.internalDocumentIDStore,n),score:s,document:t},a.add(n)}}return i}function tp(e,t){e.internalDocumentIDStore.load(e,t.internalDocumentIDStore),e.data.index=e.index.load(e.internalDocumentIDStore,t.index),e.data.docs=e.documentsStore.load(e.internalDocumentIDStore,t.docs),e.data.sorting=e.sorter.load(e.internalDocumentIDStore,t.sorting),e.tokenizer.language=t.language}Symbol("orama.insertions"),Symbol("orama.removals")},8097:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});let n=e=>"object"==typeof e&&null!=e&&1===e.nodeType,o=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,i=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let r=getComputedStyle(e,null);return o(r.overflowY,t)||o(r.overflowX,t)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},a=(e,t,r,n,o,i,a,l)=>i<e&&a>t||i>e&&a<t?0:i<=e&&l<=r||a>=t&&l>=r?i-e-n:a>t&&l<r||i<e&&l>r?a-t+o:0,l=e=>{let t=e.parentElement;return null==t?e.getRootNode().host||null:t},s=(e,t)=>{var r,o,s,u;if("undefined"==typeof document)return[];let{scrollMode:c,block:d,inline:f,boundary:h,skipOverflowHiddenElements:p}=t,m="function"==typeof h?h:e=>e!==h;if(!n(e))throw TypeError("Invalid target");let g=document.scrollingElement||document.documentElement,y=[],b=e;for(;n(b)&&m(b);){if((b=l(b))===g){y.push(b);break}null!=b&&b===document.body&&i(b)&&!i(document.documentElement)||null!=b&&i(b,p)&&y.push(b)}let v=null!=(o=null==(r=window.visualViewport)?void 0:r.width)?o:innerWidth,S=null!=(u=null==(s=window.visualViewport)?void 0:s.height)?u:innerHeight,{scrollX:w,scrollY:I}=window,{height:N,width:E,top:T,right:O,bottom:x,left:D}=e.getBoundingClientRect(),{top:_,right:P,bottom:A,left:R}=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e),k="start"===d||"nearest"===d?T-_:"end"===d?x+A:T+N/2-_+A,C="center"===f?D+E/2-R+P:"end"===f?O+P:D-R,M=[];for(let e=0;e<y.length;e++){let t=y[e],{height:r,width:n,top:o,right:l,bottom:s,left:u}=t.getBoundingClientRect();if("if-needed"===c&&T>=0&&D>=0&&x<=S&&O<=v&&(t===g&&!i(t)||T>=o&&x<=s&&D>=u&&O<=l))break;let h=getComputedStyle(t),p=parseInt(h.borderLeftWidth,10),m=parseInt(h.borderTopWidth,10),b=parseInt(h.borderRightWidth,10),_=parseInt(h.borderBottomWidth,10),P=0,A=0,R="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-b:0,L="offsetHeight"in t?t.offsetHeight-t.clientHeight-m-_:0,j="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,U="offsetHeight"in t?0===t.offsetHeight?0:r/t.offsetHeight:0;if(g===t)P="start"===d?k:"end"===d?k-S:"nearest"===d?a(I,I+S,S,m,_,I+k,I+k+N,N):k-S/2,A="start"===f?C:"center"===f?C-v/2:"end"===f?C-v:a(w,w+v,v,p,b,w+C,w+C+E,E),P=Math.max(0,P+I),A=Math.max(0,A+w);else{P="start"===d?k-o-m:"end"===d?k-s+_+L:"nearest"===d?a(o,s,r,m,_+L,k,k+N,N):k-(o+r/2)+L/2,A="start"===f?C-u-p:"center"===f?C-(u+n/2)+R/2:"end"===f?C-l+b+R:a(u,l,n,p,b+R,C,C+E,E);let{scrollLeft:e,scrollTop:i}=t;P=0===U?0:Math.max(0,Math.min(i+P/U,t.scrollHeight-r/U+L)),A=0===j?0:Math.max(0,Math.min(e+A/j,t.scrollWidth-n/j+R)),k+=i-P,C+=e-A}M.push({el:t,top:P,left:A})}return M},u=e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"};function c(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;let r=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if("object"==typeof t&&"function"==typeof t.behavior)return t.behavior(s(e,t));let n="boolean"==typeof t||null==t?void 0:t.behavior;for(let{el:o,top:i,left:a}of s(e,u(t))){let e=i-r.top+r.bottom,t=a-r.left+r.right;o.scroll({top:e,left:t,behavior:n})}}},8490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return b},MissingStaticPage:function(){return y},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return f},ST:function(){return h},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return s},getLocationOrigin:function(){return a},getURL:function(){return l},isAbsoluteUrl:function(){return i},isResSent:function(){return u},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return v}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return r||(r=!0,t=e(...o)),t}}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function a(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function l(){let{href:e}=window.location,t=a();return e.substring(t.length)}function s(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Object.defineProperty(Error('"'+s(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let f="undefined"!=typeof performance,h=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class b extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}}}]);